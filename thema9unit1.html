<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thema 3 ‚Äì Unit 1: Het wetboek van Napoleon</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;800&display=swap">
  <style>
    body { margin:0; font-family:'Nunito',sans-serif; background:#f5f3ff; color:#1f2937; }
    header { background:#7c3aed; color:#fff; text-align:center; padding:1.2rem; }
    main { width:min(960px,95%); margin:1.2rem auto 2rem; }
    .card { background:#fff; border-radius:14px; box-shadow:0 6px 16px rgba(0,0,0,.08); padding:1.1rem; margin-bottom:1rem; }
    .fragment { background:#faf5ff; border-left:4px solid #7c3aed; padding:0.8rem; border-radius:8px; }
    .helper { color:#4b5563; font-size:.95rem; }
    .question-box { background:#fff; border-radius:14px; box-shadow:0 6px 16px rgba(0,0,0,.08); padding:1.1rem; }
    label { display:block; margin:.5rem 0; }
    button { border:none; background:#6d28d9; color:#fff; border-radius:8px; padding:.6rem 1rem; font-weight:700; cursor:pointer; }
    button:hover { background:#5b21b6; }
    .feedback { margin-top:.75rem; font-weight:700; }
    .success { color:#047857; }
    .error { color:#b91c1c; }
    .hidden { display:none; }
    .text-input, .select-input, textarea { width:100%; border:1px solid #c4b5fd; border-radius:8px; padding:.55rem; font-family:inherit; }
    textarea { min-height:95px; margin-top:.45rem; }
    .nav-buttons { display:flex; gap:.6rem; flex-wrap:wrap; margin-top:1rem; }
  </style>
</head>
<body>
  <header>
    <h1>üèõÔ∏è Thema 9 ‚Äì Unit 1</h1>
    <p>Het wetboek van Napoleon</p>
  </header>
  <main>
    <section class="card">
      <h2>Bron en leesopdracht</h2>
      <p>Open de bron van de Canon van Vlaanderen en lees aandachtig.</p>
      <p><a href="https://www.canonvanvlaanderen.be/events/het-wetboek-van-napoleon/" target="_blank" rel="noopener noreferrer">üîó Ga naar de bron: Het wetboek van Napoleon</a></p>
      <div class="fragment">
        <strong>Tekstfragment (samengevat):</strong>
        <p>Napoleon voerde een burgerlijk wetboek in met regels over eigendom, huwelijk, erfenis en contracten. Het grote verschil met vroeger was dat regels systematisch op papier stonden en niet langer alleen afhingen van lokale gewoontes. Tegelijk was die gelijkheid niet volledig: vrouwen kregen bijvoorbeeld niet dezelfde rechten als mannen. Daarom is dit een sterk startpunt in het verhaal van Vlaanderen: modernisering √©n beperkingen naast elkaar.</p>
      </div>
      <p class="helper">Koppeling met de reeks: bekijk op VRT MAX <em>Het verhaal van Vlaanderen</em> en zoek het deel dat inhoudelijk aansluit.</p>
      <p><a href="https://www.vrt.be/vrtmax/a-z/het-verhaal-van-vlaanderen/" target="_blank" rel="noopener noreferrer">üé¨ VRT MAX ‚Äì Het verhaal van Vlaanderen</a></p>
    </section>

    <section class="question-box" id="quizBox">
      <h2 id="qCount">Vraag 1 van 8</h2>
      <p class="helper" id="qType"></p>
      <div id="questionText"></div>
      <form id="answerForm"></form>
      <button type="button" onclick="checkAnswer()">Controleer</button>
      <div class="feedback" id="feedback"></div>
      <div class="nav-buttons">
        <button id="nextBtn" class="hidden" type="button" onclick="nextQuestion()">Volgende vraag ‚Üí</button>
      </div>
    </section>

    <section class="card hidden" id="reflectieBox">
      <h2>üß† Reflectie: diep begrip</h2>
      <p><strong>Begripsvraag:</strong> Leg uit: wat was vooruitstrevend aan dit wetboek, en wat was nog oneerlijk? Geef van elk 1 voorbeeld.</p>
      <textarea id="gevoelInput" placeholder="Schrijf je antwoord in volledige zinnen..."></textarea>
      <p><strong>Verdiepingsvraag:</strong> Verdiepingsopdracht: lees in de Canon √©√©n stuk over familie of eigendom. Schrijf daarna in 3-4 zinnen hoe zo‚Äôn regel het dagelijkse leven van een gewoon gezin kon veranderen.</p>
      <textarea id="verdiepingInput" placeholder="Werk je verdiepingsopdracht hier uit..."></textarea>
      <button type="button" onclick="bewaarReflectie()">Bewaar reflectie</button>
      <p class="helper" id="reflectieFeedback"></p>
    </section>

    <section class="question-box hidden" id="endScreen">
      <h2>üéâ Unit voltooid!</h2>
      <p>Je behaalde <span id="xpScore">0</span> XP.</p>
      <p>Top! Je hebt feiten, verbanden √©n reflectie verwerkt in jouw deel van <strong>het verhaal van Vlaanderen</strong>.</p>
      <div class="nav-buttons">
        <a href="thema9.html"><button type="button">‚Üê Terug naar thema</button></a>
        <a href="thema9unit2.html"><button type="button">‚Üí Volgende unit</button></a>
      </div>
    </section>
  </main>

    <script src="./firebase.js"></script>
  <script src="./pavo-xp-sync.js"></script>
<script>
    const questions = [{"type": "mc", "typeLabel": "Meerkeuze", "question": "Wat maakte het wetboek van Napoleon historisch belangrijk?", "options": ["Regels werden gecodificeerd en breder toepasbaar", "Alle lokale regels verdwenen in √©√©n dag", "Het was enkel een militair handboek"], "correctIndex": 0}, {"type": "mc", "typeLabel": "Meerkeuze", "question": "Welke nuance klopt?", "options": ["Er was meer rechtsgelijkheid, maar niet voor iedereen in dezelfde mate", "Iedereen kreeg exact dezelfde rechten", "Het wetboek ging alleen over straffen"], "correctIndex": 0}, {"type": "open", "typeLabel": "Open vraag", "question": "Noem 1 domein dat in een burgerlijk wetboek geregeld wordt.", "accepted": ["eigendom", "erfenis", "huwelijk", "contracten", "familie"]}, {"type": "drag", "typeLabel": "Selectie", "question": "Kies de beste oorzaak-gevolgzin.", "options": ["Omdat regels op papier stonden, werd rechtspraak voorspelbaarder", "Omdat Napoleon kwam, stopte alle ongelijkheid meteen", "Omdat men schreef, waren er geen rechters meer"], "correctValue": "Omdat regels op papier stonden, werd rechtspraak voorspelbaarder"}, {"type": "mc", "typeLabel": "Meerkeuze", "question": "Waarom past dit in het verhaal van Vlaanderen?", "options": ["Het toont de overgang van traditionele naar moderne staatsregels", "Het is alleen een Frans verhaal zonder invloed hier", "Het gaat enkel over oorlogen"], "correctIndex": 0}, {"type": "open", "typeLabel": "Open vraag", "question": "Wie had in die tijd vaak minder juridische macht binnen het gezin?", "accepted": ["vrouwen", "de vrouw", "vrouwenrechten"]}, {"type": "drag", "typeLabel": "Selectie", "question": "Welke historische vraag is hier het sterkst?", "options": ["Wie profiteerde van deze hervorming, en wie minder?", "Welke kleur had de kaft van het wetboek?", "Hoeveel pagina‚Äôs las Napoleon zelf?"], "correctValue": "Wie profiteerde van deze hervorming, en wie minder?"}, {"type": "open", "typeLabel": "Open vraag", "question": "Geef 2 kernwoorden die deze unit samenvatten.", "accepted": ["rechtszekerheid", "gelijkheid", "wetboek", "modernisering", "ongelijkheid"]}];
    let currentQuestion = 0;
    let score = 0;

    function renderOptions(options, name) {
      return options.map((opt, index) => (`<label><input type="radio" name="${name}" value="${index}"> ${opt}</label>`)).join('');
    }

    function loadQuestion() {
      const q = questions[currentQuestion];
      document.getElementById('qCount').innerText = `Vraag ${currentQuestion + 1} van ${questions.length}`;
      document.getElementById('qType').innerText = q.typeLabel;
      document.getElementById('questionText').innerText = q.question;
      const form = document.getElementById('answerForm');
      form.innerHTML = '';
      if (q.type === 'mc') {
        form.innerHTML = renderOptions(q.options, 'answer');
      } else if (q.type === 'open') {
        form.innerHTML = `<input class="text-input" type="text" name="answer" placeholder="Typ je antwoord...">`;
      } else if (q.type === 'drag') {
        const options = ['Kies...', ...q.options];
        form.innerHTML = `<select class="select-input" name="answer">${options.map((opt) => `<option value="${opt}">${opt}</option>`).join('')}</select>`;
      }
      const feedback = document.getElementById('feedback');
      feedback.innerText = '';
      feedback.className = 'feedback';
      document.getElementById('nextBtn').classList.add('hidden');
    }

    function normalize(value) { return value.trim().toLowerCase(); }

    function checkAnswer() {
      const q = questions[currentQuestion];
      let isCorrect = false;

      if (q.type === 'mc') {
        const selected = document.querySelector('input[name="answer"]:checked');
        if (!selected) return;
        isCorrect = Number(selected.value) === q.correctIndex;
      } else if (q.type === 'open') {
        const input = document.querySelector('input[name="answer"]');
        if (!input || !input.value.trim()) return;
        const normalized = normalize(input.value);
        isCorrect = q.accepted.some((answer) => normalized.includes(normalize(answer)) || normalize(answer).includes(normalized));
      } else if (q.type === 'drag') {
        const selected = document.querySelector('select[name="answer"]');
        if (!selected || selected.value === 'Kies...') return;
        isCorrect = normalize(selected.value) === normalize(q.correctValue);
      }

      const feedback = document.getElementById('feedback');
      if (isCorrect) {
        score += 3;
        feedback.innerText = '‚úÖ Juist! +3 XP';
        feedback.classList.add('success');
      } else {
        feedback.innerText = '‚ùå Nog niet juist. Lees opnieuw en zoek oorzaak-gevolg/nuance.';
        feedback.classList.add('error');
      }
      document.getElementById('nextBtn').classList.remove('hidden');
    }

    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < questions.length) {
        loadQuestion();
      } else {
        localStorage.setItem('thema9unit1', score);
        if (window.pavoSyncScore) window.pavoSyncScore('thema9unit1', score);
        document.getElementById('quizBox').classList.add('hidden');
        document.getElementById('reflectieBox').classList.remove('hidden');
        document.getElementById('endScreen').classList.remove('hidden');
        document.getElementById('xpScore').innerText = score;
      }
    }

    function bewaarReflectie() {
      const begrip = document.getElementById('gevoelInput').value.trim();
      const verdieping = document.getElementById('verdiepingInput').value.trim();
      if (!begrip && !verdieping) return;
      const payload = JSON.stringify({ begrip, verdieping });
      localStorage.setItem('thema9unit1_reflectie', payload);
        if (window.pavoSyncScore) window.pavoSyncScore('thema9unit1_reflectie', payload);
      document.getElementById('reflectieFeedback').innerText = '‚úÖ Reflectie en verdieping bewaard.';
    }

    window.onload = loadQuestion;
  </script>
  <script src="./unit-navigation.js"></script>
</body>
</html>

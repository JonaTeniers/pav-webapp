<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PAV-O | Theme Manager</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
--primary:#0b4da2;
--bg:#f0f4f8;
--white:#ffffff;
--border:#e2e8f0;
--text:#1e293b;
}
body{
margin:0;
font-family:'Nunito',sans-serif;
background:var(--bg);
display:flex;
}
.sidebar{
width:260px;
background:white;
height:100vh;
position:fixed;
border-right:1px solid var(--border);
padding:20px;
}
.sidebar h2{
color:var(--primary);
font-weight:800;
}
.sidebar a{
display:block;
padding:12px 15px;
margin-bottom:6px;
border-radius:10px;
text-decoration:none;
font-weight:700;
color:var(--text);
}
.sidebar a.active,
.sidebar a:hover{
background:#e0f2fe;
color:var(--primary);
}
.main{
margin-left:260px;
width:calc(100% - 260px);
display:grid;
grid-template-columns:1fr 1.2fr;
gap:30px;
padding:40px;
}
.editor{
background:white;
padding:25px;
border-radius:18px;
box-shadow:0 4px 12px rgba(0,0,0,0.05);
}
.editor input,
.editor textarea{
width:100%;
padding:10px;
border-radius:8px;
border:1px solid var(--border);
margin-bottom:15px;
font-family:inherit;
}
.editor button{
background:var(--primary);
color:white;
padding:10px 16px;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:700;
margin-bottom:10px;
}
.save-btn{
background:#10b981 !important;
}
.unit-item{
background:#f8fafc;
padding:10px;
border-radius:8px;
margin-bottom:10px;
}
.preview{
background:white;
border-radius:20px;
overflow:hidden;
box-shadow:0 4px 20px rgba(0,0,0,0.08);
}
.preview-header{
padding:30px;
color:white;
}
.preview-body{
padding:25px;
display:grid;
grid-template-columns:2fr 1fr;
gap:20px;
background:#f9fafb;
}
.units-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
gap:12px;
}
.unit-card{
background:#e6f3f0;
padding:12px;
border-radius:10px;
font-size:0.9rem;
}
.unit-card button{
margin-top:8px;
width:100%;
border:none;
padding:6px;
border-radius:6px;
background:#0f766e;
color:white;
font-weight:600;
cursor:pointer;
}
.chat-box{
background:#fff;
padding:15px;
border-radius:12px;
box-shadow:0 3px 8px rgba(0,0,0,0.05);
}
</style>
</head>

<body>

<nav class="sidebar">
<h2>PAV-O</h2>
<a href="teacher-dashboard.html">ðŸ“Š Resultaten</a>
<a href="#" class="active">âž• Maak nieuw thema</a>
<a href="index.html">ðŸšª Leerlingomgeving</a>
</nav>

<div class="main">

<div class="editor">
<h2>Nieuw Thema</h2>

<label>Titel</label>
<input id="titleInput" placeholder="Bijv: Thema 10 â€“ Gezondheid">

<label>Beschrijving</label>
<textarea id="descInput" placeholder="Korte uitleg van het thema"></textarea>

<label>Thema kleur</label>
<input type="color" id="colorInput" value="#0f766e">

<hr>

<h3>Units</h3>
<div id="unitList"></div>

<button onclick="addUnit()">+ Unit toevoegen</button>
<button class="save-btn" onclick="saveTheme()">ðŸ’¾ Thema opslaan</button>

</div>

<div class="preview">

<div class="preview-header" id="previewHeader" style="background:#0f766e;">
<h1 id="previewTitle">Thema titel</h1>
<p id="previewDesc">Beschrijving van het thema</p>
</div>

<div class="preview-body">
<div>
<div class="units-grid" id="previewUnits"></div>
</div>
<div>
<div class="chat-box">
<strong>ðŸ¤– Chattie</strong>
<p>Chat assistent preview</p>
</div>
</div>
</div>

</div>
</div>

<script src="./firebase.js"></script>

<script>

const titleInput = document.getElementById('titleInput');
const descInput = document.getElementById('descInput');
const colorInput = document.getElementById('colorInput');
const previewTitle = document.getElementById('previewTitle');
const previewDesc = document.getElementById('previewDesc');
const previewHeader = document.getElementById('previewHeader');
const previewUnits = document.getElementById('previewUnits');
const unitList = document.getElementById('unitList');

let units = [];

titleInput.addEventListener('input',()=>{
previewTitle.innerText = titleInput.value || "Thema titel";
});

descInput.addEventListener('input',()=>{
previewDesc.innerText = descInput.value || "Beschrijving van het thema";
});

colorInput.addEventListener('input',()=>{
previewHeader.style.background = colorInput.value;
});

function addUnit(){
if(units.length >= 12){
alert("Maximum 12 units toegestaan.");
return;
}
const unitTitle = prompt("Naam van de unit?");
if(!unitTitle) return;
units.push(unitTitle);
renderUnits();
}

function renderUnits(){
previewUnits.innerHTML="";
unitList.innerHTML="";
units.forEach((unit,i)=>{
previewUnits.innerHTML += `
<div class="unit-card">
<strong>Deel ${i+1}</strong>
<p>${unit}</p>
<button>Start</button>
</div>`;
unitList.innerHTML += `
<div class="unit-item">
Deel ${i+1}: ${unit}
</div>`;
});
}

async function saveTheme(){

if(!titleInput.value){
alert("Geef een titel in.");
return;
}

try{

await window.firebaseReady;

await window.db.collection("themes").add({
title:titleInput.value,
description:descInput.value,
color:colorInput.value,
units:units,
active:true,
createdAt:firebase.firestore.FieldValue.serverTimestamp()
});

alert("Thema succesvol opgeslagen!");

titleInput.value="";
descInput.value="";
units=[];
renderUnits();

previewTitle.innerText="Thema titel";
previewDesc.innerText="Beschrijving van het thema";
previewHeader.style.background="#0f766e";

}catch(error){
console.error(error);
alert("Fout bij opslaan.");
}

}

</script>

</body>
</html>
